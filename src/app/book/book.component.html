<div class="wrapper animation">

  <div class="fixed-action-btn">
    <a class="btn-floating btn-large red">
      <i class="large material-icons">add</i>
    </a>
    <ul>
      <li>
        <a class="btn-floating green btn modal-trigger" (click)="openModal()"><i class="material-icons">publish</i></a>
      </li>
    </ul>
  </div>

  <!-- Modal Structure -->
  <div id="modal1" class="modal" materialize="modal" [materializeParams]="[{dismissible: false}]" [materializeActions]="modalActions">
    <div class="modal-content">
      <h4>New book</h4>
      <div class="row">
        <div class="col s5">

          <div class="input-field">
            <i class="material-icons prefix">book</i>
            <input id="title" type="text" class="validate" [(ngModel)]="title" name="title">
            <label for="title">Title</label>
          </div>

          <div class="input-field">
            <i class="material-icons prefix">person_outline</i>
            <input id="author" type="text" class="validate" [(ngModel)]="author" name="author">
            <label for="author">Author</label>
          </div>

          <div class="input-field">
            <i class="material-icons prefix">description</i>
            <textarea id="description" class="materialize-textarea" [(ngModel)]="description" name="description"></textarea>
            <label for="description">Description</label>
          </div>

          <div class="input-field">
            <i class="material-icons prefix">dehaze</i>
            <input id="pages" type="text" class="validate" [(ngModel)]="pages" name="pages">
            <label for="pages">Pages</label>
          </div>

          <div class="input-field">
            <i class="material-icons prefix">attach_money</i>
            <input id="price" type="text" class="validate" [(ngModel)]="price" name="price">
            <label for="price">Price $</label>
          </div>
        </div>

        <div class="col s6">
          <div class="input-field">
            <i class="material-icons prefix">language</i>
            <input id="language" type="text" class="validate" [(ngModel)]="language" name="language">
            <label for="language">Language</label>
          </div>

          <div class="input-field">
            <i class="material-icons prefix">library_books</i>
            <input id="publisher" type="text" class="validate" [(ngModel)]="publisher" name="publisher">
            <label for="publisher">Publisher</label>
          </div>

          <div class="input-field">
            <i class="material-icons prefix">date_range</i>
            <input id="pubDate" type="text" materialize="pickadate" [materializeParams]="[{format:'dd/mm/yyyy'}]" [(ngModel)]="pubDate"
              name="pubDate">
            <label for="pubDate">Publication Date</label>
          </div>

          <label class="card-title">Image</label>
          <div class="file-field input-field">
            <div class="btn">
              <span>File</span>
              <input type="file" (change)="fileChange($event)" placeholder="Upload file">
            </div>
            <div class="file-path-wrapper">
              <input class="file-path validate" type="text">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <a class="waves-effect waves-green btn-flat" (click)="closeModal()">Close</a>
      <a class="modal-action modal-close waves-effect waves-green btn-flat" (click)="addBook()">Add</a>
    </div>
  </div>
  <!--End modal structure -->

  <div class="row">
    <h3>Total {{booksTotal}}</h3>
    <div class="col m3" *ngFor="let book of books">
      <div class="card medium sticky-action">
        <div class="card-image activator">
          <i class="material-icons right" style="cursor: pointer">more_vert</i>
          <img src="http://localhost:3000/assets/uploads/{{book.image}}">
        </div>
        <div class="card-content">
          <span> {{book.title}} </span>
        </div>
        <div class="card-action">
          <button class="waves-effect waves-light btn indigo" (click)="deleteBook(book._id)"><i class="material-icons">delete</i></button>
          <button class="waves-effect waves-light btn light-blue darken-1" (click)="editBook(book)"><i class="material-icons">edit</i></button>
        </div>

        <div class="card-reveal" id="paragraph">
          <span class="card-title grey-text text-darken-4"> {{book.title}}<i class="material-icons right">close</i></span>
          <p style="font-size:12px">{{book.description}}</p>
          <p><b>Originally published: </b>{{book.pubDate}}</p>
          <p><b>Genre: </b>{{book.genre.name}}</p>
          <p><b>Publisher: </b>{{book.publisher}}</p>
          <p><b>Author: </b> {{book.author}}</p>
          <p><b>Language: </b>{{book.language}}</p>
          <p><b>Length: </b>{{book.pages}}</p>
          <p><b>Price: </b>$ {{book.price}}</p>
          <p><b>Added: </b>{{book.date | date: 'short'}}</p>
        </div>
      </div>
    </div>
  </div>

</div>